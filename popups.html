<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popups & Windows | AutomationWithPiyush</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&display=swap');

        body {
            background-color: #1a1b23;
            color: #ffffff;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        .bg-card {
            background-color: #252631;
        }

        .text-accent {
            color: #facc15;
        }

        /* Modal Overlay Styling */
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
            transition: all 0.3s ease;
        }

        /* Custom File Input */
        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .file-input-wrapper input[type=file] {
            font-size: 100px;
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
        }

        /* Toast Notification */
        #toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }

        .toast {
            background: #252631;
            border-left: 4px solid #facc15;
            color: white;
            padding: 1rem 1.5rem;
            margin-bottom: 10px;
            border-radius: 4px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* --- GRAND WELCOME ANIMATION --- */
        .welcome-anim-container {
            animation: popIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        .grand-text {
            background: linear-gradient(to right, #facc15, #f87171, #60a5fa, #facc15);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% auto;
            animation: shine 3s linear infinite;
        }

        @keyframes popIn {
            0% {
                opacity: 0;
                transform: scale(0.5) translateY(-20px);
            }

            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes shine {
            to {
                background-position: 200% center;
            }
        }
    </style>
</head>

<body class="pb-20">

    <div id="toast-container"></div>

    <div id="customModal" class="modal-overlay fixed inset-0 z-50 hidden flex items-center justify-center">
        <div
            class="bg-[#252631] border border-gray-700 p-8 rounded-xl max-w-md w-full shadow-2xl transform scale-100 transition-transform">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-white">Surgical Report</h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-red-500 transition">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <p class="text-gray-400 mb-6">This is a standard <b>Hidden Division</b> popup. It exists in the DOM but is
                hidden via CSS. You cannot interact with the background page until this is closed.</p>
            <div class="flex justify-end gap-4">
                <button onclick="closeModal()"
                    class="px-4 py-2 text-gray-400 hover:text-white transition">Cancel</button>
                <button onclick="closeModal()"
                    class="px-6 py-2 bg-accent text-black font-bold rounded hover:bg-white transition">Sign Off</button>
            </div>
        </div>
    </div>

    <nav class="relative flex justify-between items-center px-6 md:px-8 py-6 max-w-7xl mx-auto z-50">
        <div class="flex items-center gap-3"></div>
        <a href="index.html" class="text-gray-400 hover:text-white transition-colors text-sm font-medium">
            <i class="fas fa-arrow-left mr-2"></i> Back to Ward
        </a>
    </nav>

    <header class="max-w-7xl mx-auto px-6 py-10" data-aos="fade-down">
        <p class="text-accent uppercase tracking-widest text-xs font-bold mb-4">â€” Isolation Ward</p>
        <h1 class="text-4xl md:text-5xl font-bold">Popups & <span class="text-gray-600">Overlays</span></h1>
    </header>

    <main class="max-w-7xl mx-auto px-6 space-y-12">

        <section id="welcome-section"
            class="hidden text-center py-10 bg-gray-800/50 rounded-2xl border border-gray-700">
            <div class="welcome-anim-container">
                <h2 class="text-2xl md:text-4xl font-bold text-white mb-2">Welcome Aboard,</h2>
                <h1 id="user-name-display" class="text-5xl md:text-7xl font-extrabold grand-text pb-2">Guest</h1>
                <p class="text-gray-400 mt-4">We have prepared the surgical suite for you.</p>
            </div>
        </section>

        <section class="grid lg:grid-cols-3 gap-8" data-aos="fade-up">
            <div class="bg-card p-8 rounded-xl border border-gray-800 hover:border-accent transition group">
                <i class="fas fa-exclamation-circle text-3xl text-red-400 mb-4"></i>
                <h3 class="text-xl font-bold mb-2">JS Alert</h3>
                <p class="text-gray-400 text-sm mb-6">Triggers a native blocking alert. Handle using
                    <code>driver.switchTo().alert().accept()</code>.
                </p>
                <button onclick="triggerAlert()"
                    class="w-full py-3 bg-red-500/10 text-red-400 border border-red-500/50 rounded font-bold hover:bg-red-500 hover:text-white transition">Trigger
                    Alert</button>
                <p id="alertResult" class="mt-4 text-xs font-mono text-gray-500 h-4"></p>
            </div>

            <div class="bg-card p-8 rounded-xl border border-gray-800 hover:border-accent transition group">
                <i class="fas fa-question-circle text-3xl text-blue-400 mb-4"></i>
                <h3 class="text-xl font-bold mb-2">JS Confirm</h3>
                <p class="text-gray-400 text-sm mb-6">Triggers a confirmation dialog. Practice <code>dismiss()</code> vs
                    <code>accept()</code>.
                </p>
                <button onclick="triggerConfirm()"
                    class="w-full py-3 bg-blue-500/10 text-blue-400 border border-blue-500/50 rounded font-bold hover:bg-blue-500 hover:text-white transition">Trigger
                    Confirm</button>
                <p id="confirmResult" class="mt-4 text-xs font-mono text-gray-500 h-4"></p>
            </div>

            <div class="bg-card p-8 rounded-xl border border-gray-800 hover:border-accent transition group">
                <i class="fas fa-keyboard text-3xl text-green-400 mb-4"></i>
                <h3 class="text-xl font-bold mb-2">JS Prompt</h3>
                <p class="text-gray-400 text-sm mb-6">Triggers an input prompt. Practice <code>sendKeys()</code> into
                    the alert interface.</p>
                <button onclick="triggerPrompt()"
                    class="w-full py-3 bg-green-500/10 text-green-400 border border-green-500/50 rounded font-bold hover:bg-green-500 hover:text-white transition">Trigger
                    Prompt</button>
                <p id="promptResult" class="mt-4 text-xs font-mono text-gray-500 h-4"></p>
            </div>
        </section>



        <section class="grid lg:grid-cols-2 gap-8" data-aos="fade-up">
            <div class="bg-card p-8 rounded-xl border border-gray-800">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <i class="fas fa-id-card text-accent mr-3"></i> Authentication Popup
                </h3>
                <p class="text-gray-400 text-sm mb-6">Browser-level Basic Auth popups cannot be inspected. You must pass
                    credentials in the URL: <code>http://user:pass@url.com</code>.</p>
                <a href="https://the-internet.herokuapp.com/basic_auth" target="_blank"
                    class="block text-center px-8 py-3 border border-gray-600 text-gray-300 font-bold rounded hover:border-accent hover:text-accent transition">Trigger
                    Basic Auth (External) <i class="fas fa-external-link-alt ml-2"></i></a>
            </div>

            <div class="bg-card p-8 rounded-xl border border-gray-800">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <i class="fas fa-layer-group text-accent mr-3"></i> Hidden Division (Modal)
                </h3>
                <p class="text-gray-400 text-sm mb-8">These are not native windows. They are HTML
                    <code>&lt;div&gt;</code> elements that overlay the page content. You must wait for their visibility.
                </p>
                <button onclick="openModal()"
                    class="px-8 py-3 bg-white text-black font-bold rounded hover:bg-accent transition w-full md:w-auto">Launch
                    Modal</button>
            </div>
        </section>

        <section class="grid lg:grid-cols-2 gap-8" data-aos="fade-up">
            <div class="bg-card p-8 rounded-xl border border-gray-800">
                <h3 class="text-xl font-bold mb-6">File Upload</h3>
                <p class="text-gray-400 text-sm mb-6">Standard <code>input type="file"</code>. Use
                    <code>sendKeys("C:/path/to/file.txt")</code> to upload directly.
                </p>
                <div
                    class="p-6 border-2 border-dashed border-gray-600 rounded-lg text-center hover:border-accent transition group">
                    <div class="file-input-wrapper">
                        <button
                            class="bg-gray-700 text-white px-6 py-2 rounded font-bold group-hover:bg-accent group-hover:text-black transition pointer-events-none">Choose
                            File</button>
                        <input type="file" id="fileUpload" onchange="handleFileUpload(this)">
                    </div>
                    <p id="fileNameDisplay" class="mt-4 text-xs text-gray-500">No file selected</p>
                </div>
            </div>

            <div class="bg-card p-8 rounded-xl border border-gray-800">
                <h3 class="text-xl font-bold mb-6">File Download</h3>
                <p class="text-gray-400 text-sm mb-6">Triggers a browser-level download. You must configure Browser
                    Profile settings to handle this automatically in Selenium.</p>
                <button onclick="triggerDownload()"
                    class="w-full h-32 flex flex-col items-center justify-center bg-gray-700/50 rounded-lg hover:bg-gray-700 transition">
                    <i class="fas fa-cloud-download-alt text-4xl text-accent mb-3"></i>
                    <span class="font-bold">Download Report.pdf</span>
                </button>
            </div>
        </section>

        <section class="bg-card p-8 rounded-xl border border-gray-800" data-aos="fade-up">
            <h3 class="text-xl font-bold mb-6 flex items-center">
                <i class="fas fa-window-restore text-accent mr-3"></i> Child Windows & Tabs
            </h3>
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div>
                    <p class="text-gray-400 text-sm mb-6">Clicking the button below opens a new browser window/tab. You
                        must switch context using <code>driver.getWindowHandles()</code> to interact with the new page.
                    </p>
                    <div class="flex flex-wrap gap-4">
                        <button onclick="openNewWindow()"
                            class="px-6 py-3 bg-gray-700 hover:bg-white hover:text-black rounded font-bold transition text-xs">Open
                            New Window</button>
                        <button onclick="openNewTab()"
                            class="px-6 py-3 bg-gray-700 hover:bg-white hover:text-black rounded font-bold transition text-xs">Open
                            New Tab</button>
                        <button onclick="openMultipleWindows()"
                            class="px-6 py-3 bg-red-600 hover:bg-red-500 text-white rounded font-bold transition text-xs flex items-center gap-2">
                            <i class="fas fa-layer-group"></i> Open multiple windows
                        </button>
                    </div>
                </div>
                <div class="bg-black/30 p-4 rounded-lg border border-gray-700 font-mono text-xs text-green-400">
                    // Expected Selenium Logic<br>
                    Set&lt;String&gt; handles = driver.getWindowHandles();<br>
                    for(String handle : handles) {<br>
                    &nbsp;&nbsp;driver.switchTo().window(handle);<br>
                    &nbsp;&nbsp;if(driver.getTitle().contains("Amazon")) { ... }<br>
                    }
                </div>
            </div>
        </section>

    </main>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({ duration: 800, once: true });

        // ============================================
        // 1. INITIALIZATION LOGIC (Location + Prompt)
        // ============================================
        window.addEventListener('load', () => {

            // --- A: Immediate Location Request ---
            // This triggers the native "Know your location" popup
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        console.log("Location Granted");
                        showToast("Location Access Granted");
                    },
                    (error) => {
                        console.log("Location Denied");
                        showToast("Location Access Denied");
                    }
                );
            }

            // --- B: Username Prompt & Grand Welcome ---
            // Delayed slightly to allow the location popup to register visually
            setTimeout(() => {
                let name = prompt("Please enter your name to access the ward:");

                if (name && name.trim() !== "") {
                    // Update Text
                    document.getElementById('user-name-display').innerText = name;

                    // Show Grand Welcome Section with Animation
                    const welcomeSection = document.getElementById('welcome-section');
                    welcomeSection.classList.remove('hidden');

                    showToast("Welcome, " + name);
                } else {
                    // Fallback if they cancel or enter empty
                    document.getElementById('user-name-display').innerText = "Guest";
                    document.getElementById('welcome-section').classList.remove('hidden');
                }
            }, 500); // 500ms delay
        });


        function showToast(msg) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerText = msg;
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        // --- Native JS Alerts ---
        function triggerAlert() {
            alert("This is a native Javascript Alert!");
            document.getElementById('alertResult').innerText = "Alert Handled Successfully";
        }

        function triggerConfirm() {
            const result = confirm("Do you wish to proceed?");
            const display = document.getElementById('confirmResult');
            display.innerText = result ? "You clicked OK" : "You clicked Cancel";
            display.className = result ? "mt-4 text-xs font-mono text-green-400" : "mt-4 text-xs font-mono text-red-400";
        }

        function triggerPrompt() {
            const name = prompt("Please enter your name for the roster:");
            const display = document.getElementById('promptResult');
            if (name) {
                display.innerText = "Welcome, " + name;
                display.classList.add('text-green-400');
            } else {
                display.innerText = "User cancelled the prompt.";
                display.classList.add('text-red-400');
            }
        }

        // --- Modal Logic ---
        function openModal() {
            document.getElementById('customModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('customModal').classList.add('hidden');
            showToast("Modal Closed");
        }

        // --- Windows Logic ---
        function openNewWindow() {
            window.open('about:blank', '_blank', 'width=600,height=400');
            showToast("New Window Opened");
        }

        function openNewTab() {
            window.open('about:blank', '_blank');
            showToast("New Tab Opened");
        }

        // --- Open 3 Windows Logic ---
        function openMultipleWindows() {
            window.open("https://www.amazon.in", "_blank");
            window.open("https://www.flipkart.com", "_blank");
            window.open("https://www.ebay.com", "_blank");
            showToast("3 Windows Opened (Amazon, Flipkart, eBay)");
        }

        // --- File Logic ---
        function handleFileUpload(input) {
            const display = document.getElementById('fileNameDisplay');
            if (input.files.length > 0) {
                display.innerText = "Selected: " + input.files[0].name;
                display.classList.add('text-green-400');
                showToast("File Uploaded Successfully");
            }
        }

        function triggerDownload() {
            const text = "This is a dummy medical report for automation testing purposes.";
            const blob = new Blob([text], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = "medical_report.txt";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            showToast("Download Started");
        }

        // --- Notification Logic (Manual Button) ---
        function requestNotification() {
            if (!("Notification" in window)) {
                showToast("This browser does not support desktop notifications");
            } else {
                Notification.requestPermission().then(permission => {
                    if (permission === "granted") {
                        new Notification("AutomationOPD", {
                            body: "Notifications enabled successfully!",
                            icon: "awp.png"
                        });
                    } else {
                        showToast("Permission Denied / Closed");
                    }
                });
            }
        }
    </script>
</body>

</html>